<app-header></app-header>
    <div class="vlog-detail-panel">
      <div class="vlog-main-layout">
        <!-- Left: Featured/Main Vlog -->
        <div class="featured-vlog-panel">
          <ng-container *ngIf="selectedVlogFile; else noSelection">
            <div class="featured-media-wrapper" *ngIf="currentVlogFiles.length > 0">
              <button (click)="prevSlide()" class="slide-btn">&lt;</button>
              <ng-container *ngIf="currentVlogFiles[currentSlideIndex] as file">
                <img *ngIf="file.fileType && file.fileType.toLowerCase().includes('image')" [src]="file.filePath" class="featured-image" />
                <video *ngIf="file.fileType && file.fileType.toLowerCase().includes('video')" [src]="file.filePath" controls class="featured-video"></video>
              </ng-container>
              <button (click)="nextSlide()" class="slide-btn">&gt;</button>
            </div>
            <div class="vlog-content-section" *ngIf="getCurrentVlog() as vlog">
              <div class="vlog-detail-block">
                <div class="vlog-title" title="{{ vlog.title }}">{{ vlog.title }}</div>
                <div class="vlog-content">
                  {{ vlog.vlogContent | slice:0:80 }}<span *ngIf="(vlog.vlogContent?.length || 0) > 80">...</span>
                </div>
                <div class="vlog-date">{{ vlog.createdDate | date: 'mediumDate' }}</div>
              </div>
            </div>
            <app-vlog-comment [vlog]="selectedVlogFile"></app-vlog-comment>
          </ng-container>
          <ng-template #noSelection>
            <div class="empty-featured">
              <i class="fas fa-hand-point-left"></i>
              <h3>Select a Blog</h3>
              <p>Choose a video from the list to view its details here.</p>
            </div>
          </ng-template>
        </div>

        <!-- Right: Sidebar Trending Vlogs -->
        <aside class="sidebar-trending">
          <app-vlog-list
          [vlogs]="filteredVlogFiles"
          [currentVlogId]="selectedVlogFile?.vlogId"
          [parentVlogs]="allVlogs"
          (vlogSelected)="onVlogSelected($event)"
        ></app-vlog-list>
          
        </aside>
      </div>
    </div>
