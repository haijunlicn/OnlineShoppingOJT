<div class="qanda-section">
  <h5>Questions about this product ({{total}})</h5>
  <ng-container *ngIf="isLoggedIn && isCustomer; else loginPrompt">
    <input [(ngModel)]="newQuestion" placeholder="Enter your question(s) here" />
    <button (click)="submitQuestion()">ASK QUESTIONS</button>
  </ng-container>
  <ng-template #loginPrompt>
    <div class="alert alert-info">
      To ask questions login in first
    </div>
  </ng-template>
  <div class="qanda-list">
    <div *ngFor="let q of questions">
      <div class="q-row">
        <span class="q-icon">Q</span>
        <span class="q-text">{{q.questionText}}</span>
        <span class="q-meta">{{q.userName}} - {{q.createdAt | date:'dd MMM yyyy'}}</span>
        <ng-container *ngIf="canEditDelete(q)">
          <button (click)="openEditModal(q)">Edit</button>
          <button (click)="deleteQuestion(q)">Delete</button>
        </ng-container>
      </div>
      <div *ngFor="let a of q.answers">
        <span class="a-icon">A</span>
        <span class="a-text">{{a.answerText}}</span>
        <span class="a-meta">{{a.adminName}} - Answered {{a.createdAt | date:'dd MMM yyyy'}}</span>
      </div>
    </div>
  </div>

  <!-- Edit Question Modal -->
  <div *ngIf="showEditModal" class="edit-modal-backdrop">
    <div class="edit-modal-box">
      <h4>Edit Your Question</h4>
      <input [(ngModel)]="editQuestionText" />
      <div class="edit-modal-actions">
        <button (click)="closeEditModal()">Cancel</button>
        <button (click)="submitEdit()">Save</button>
      </div>
    </div>
  </div>
</div>