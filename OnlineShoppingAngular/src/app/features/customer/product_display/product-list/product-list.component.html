<div class="product-list-container">
  <!-- Header Section -->
  <div class="header-section">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">Products</h1>
        <span class="item-count">{{ products.length || 0 }} items</span>
      </div>
      
      <div class="controls-section">
        <!-- Category Filter -->
        <select class="filter-select">
          <option>All Categories</option>
          <option>Electronics</option>
          <option>Clothing</option>
          <option>Home & Kitchen</option>
        </select>

        <!-- Sort Filter -->
        <select class="filter-select">
          <option>Sort by: Featured</option>
          <option (click)="sortByPriceAsc()">Price: Low to High</option>
          <option>Price: High to Low</option>
          <option>Newest First</option>
          <option (click)="sortByBrand()">Brand A-Z</option>
        </select>

        <!-- View Toggle -->
        <div class="view-toggle">
          <button class="view-btn active">
            <i class="pi pi-th-large"></i>
          </button>
          <button class="view-btn">
            <i class="pi pi-list"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Products Grid -->
  <div class="products-grid">
    <div 
      *ngFor="let product of products" 
      class="product-card"
      (click)="goToDetail(product)">
      
      <!-- Image Container -->
      <div class="product-image-container">
        <!-- Badges -->
        <div class="product-badges">
          <span *ngIf="isOnSale(product)" class="badge sale-badge">SALE</span>
          <span *ngIf="isNew(product)" class="badge new-badge">NEW</span>
        </div>

        <!-- Wishlist Button -->
        <button 
          class="wishlist-btn"
          [class.active]="isWished(product.id!)"
          (click)="toggleWish(product.id!); $event.stopPropagation()"
          [title]="isWished(product.id!) ? 'Remove from wishlist' : 'Add to wishlist'">
          <i class="pi" [ngClass]="isWished(product.id!) ? 'pi-heart-fill' : 'pi-heart'"></i>
        </button>

        <!-- Product Image -->
        <img 
          [src]="getMainProductImage(product.product)" 
          [alt]="product.product.name"
          class="product-image"
          loading="lazy">

        <!-- Quick View Overlay -->
        
      </div>

      <!-- Product Info -->
      <div class="product-info">
        <!-- Brand & Category -->
        <div class="product-meta">
          <span class="brand-name">{{ product.brand.name }}</span>
          <span class="category-name">{{ product.category.name }}</span>
        </div>

        <!-- Product Name -->
        <h3 class="product-name" [title]="product.product.name">
          {{ product.product.name }}
        </h3>

        <!-- Price & Stock -->
        <div class="price-stock-section">
          <div class="price-container">
            <span class="current-price">${{ getLowestPrice(product) | number:'1.2-2' }}</span>
            <span 
              *ngIf="isOnSale(product)" 
              class="original-price">
              ${{ product.product.basePrice | number:'1.2-2' }}
            </span>
          </div>
          
          <span 
            class="stock-badge"
            [class.in-stock]="hasStock(product)"
            [class.out-of-stock]="!hasStock(product)">
            {{ hasStock(product) ? 'In Stock' : 'Out of Stock' }}
          </span>
        </div>

        <!-- Action Button -->
        <button 
          class="action-btn"
          [disabled]="!hasStock(product)"
          (click)="viewProduct(product); $event.stopPropagation()">
          {{ hasStock(product) ? 'View Details' : 'Out of Stock' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="products.length === 0" class="empty-state">
    <i class="pi pi-shopping-bag empty-icon"></i>
    <h3>No products found</h3>
    <p>Try adjusting your filters or check back later.</p>
  </div>

  <!-- Pagination -->
  <nav class="pagination-nav">
    <ul class="pagination">
      <li class="page-item disabled">
        <button class="page-link" disabled>Previous</button>
      </li>
      <li class="page-item active">
        <button class="page-link">1</button>
      </li>
      <li class="page-item">
        <button class="page-link">2</button>
      </li>
      <li class="page-item">
        <button class="page-link">3</button>
      </li>
      <li class="page-item">
        <button class="page-link">Next</button>
      </li>
    </ul>
  </nav>
</div>