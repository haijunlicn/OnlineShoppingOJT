<app-header></app-header>

<main class="main-content">
  <!-- Loading State -->
  <div class="hero-loading" *ngIf="isLoadingDiscounts" >
    <div class="loading-spinner"></div>
    <p>Loading offers...</p>
  </div>

  <!-- Discount Hero Carousel -->
  <!-- <app-discount-hero-carousel
    *ngIf="!isLoadingDiscounts && discounts.length > 0"
    [discounts]="discounts"
    (viewDetails)="onDiscountViewDetails($event)">
  </app-discount-hero-carousel> -->

    <!-- Replace Hero Section only if discounts exist -->
    <app-discount-hero-carousel *ngIf="!isLoadingDiscounts && discounts.length > 0" [discounts]="discounts" 
      (viewDetails)="onDiscountViewDetails($event)" (shopNow)="onShopNow()">
    </app-discount-hero-carousel>

    <!-- Fallback Hero Section -->
    <section class="hero-section" *ngIf="!isLoadingDiscounts && discounts && discounts.length === 0">
      <div class="hero-content">
        <h1 class="hero-title">Discover Your Next Favorite</h1>
        <p class="hero-subtitle">Shop the latest trends and exclusive deals, all in one place.</p>
        <form class="hero-search-form" (submit)="$event.preventDefault(); onSearch(heroSearchInput.value)">
          <input #heroSearchInput type="text" class="hero-search-input"
            placeholder="Search for products, brands, and more..." aria-label="Search">
          <button type="submit" class="hero-search-btn"><i class="fas fa-search"></i></button>
        </form>
        <button class="hero-btn" (click)="onShopNow()">
          <span>Shop Now</span>
          <div class="btn-shine"></div>
        </button>
      <!-- </form> -->
      <button class="hero-btn" (click)="onShopNow()">
        <span>Explore Collection</span>
        <div class="btn-shine"></div>
      </button>
    </div>
  </section>

  <!-- Top Sellers Section -->
  <section class="top-sellers-section">
    <h2 class="section-title">Our Best Sellers</h2>
    <div *ngIf="isLoadingTop" class="hero-loading">
      <div class="loading-spinner"></div>
      <p>Loading best sellers...</p>
    </div>
    <div *ngIf="!isLoadingTop">
      <div class="top-categories">
        <h3>Top Categories</h3>
        <div class="top-category-grid">
          <div class="category-card rect-card" *ngFor="let cat of topCategories">
            <img [src]="cat.imgPath || 'assets/images/categories/default.jpg'" [alt]="cat.name" class="category-image-rect" />
            <div class="category-info">
              <h4>{{ cat.name }}</h4>
              <a [routerLink]="['/customer/productList']" [queryParams]="{ category: cat.name }" class="category-link">Shop Now</a>
            </div>
          </div>
        </div>
      </div>
      <div class="top-products">
        <h3>Featured Products</h3>
        <div class="top-product-grid">
          <div class="product-card rect-card" *ngFor="let prod of topProducts">
            <img [src]="getMainProductImage(prod.product)" [alt]="prod.product.name" class="product-image-rect" />
            <div class="product-info">
              <h4>{{ prod.product.name }}</h4>
              <div class="product-price">{{ prod.product.basePrice | currency:'MMK':'symbol' }}</div>
              <div class="product-btns">
                <a [routerLink]="['/customer/product', prod.id]" class="category-link">View Details</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>




