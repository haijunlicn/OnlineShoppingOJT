<div class="container">
  <h2>Create New Vlog File</h2>

  <div *ngIf="loading" class="loading-spinner">Loading...</div>
  <div *ngIf="errorMessage" class="message error-message">{{ errorMessage }}</div>
  <div *ngIf="uploadMessage" class="message success-message">{{ uploadMessage }}</div>

  <div class="form-section">
    <form (ngSubmit)="createVlogFile()">
      
      <div class="form-group">
        <label for="filePath">File URL:</label>
        <input
          type="text"
          id="filePath"
          [(ngModel)]="newVlogFile.filePath"
          name="filePath"
          required
        />
      </div>

      <div class="preview">
        <img *ngIf="newVlogFile.filePath && isImage()" [src]="newVlogFile.filePath" alt="Preview" class="image-preview" />
        <video *ngIf="newVlogFile.filePath && isVideo()" controls class="video-preview">
          <source [src]="newVlogFile.filePath" />
          Your browser does not support the video tag.
        </video>
      </div>

      <div class="form-group">
        <label for="description">Description (Optional):</label>
        <textarea
          id="description"
          [(ngModel)]="newVlogFile.description"
          name="description"
        ></textarea>
      </div>

      <div class="upload-section">
        <h3>Upload Image/Video (Optional)</h3>
        <div class="form-group">
          <label for="fileUpload">Select File:</label>
          <input type="file" id="fileUpload" (change)="onFileSelected($event)" accept="image/*,video/*" />
        </div>
        <div class="button-group">
          <button type="button" class="button button-secondary" (click)="uploadFile()" [disabled]="!selectedFile || loading">
            Upload File
          </button>
        </div>
      </div>

      <div class="button-group">
        <button type="submit" class="button button-primary" [disabled]="loading">Create Vlog File</button>
        <button type="button" class="button button-secondary" (click)="cancel()">Cancel</button>
      </div>
    </form>
  </div>
</div>
