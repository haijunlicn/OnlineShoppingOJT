<div class="admin-qanda-table">
  <h2>Q&A Management</h2>
  <div class="qanda-filters">
    <label>
      Sort by:
      <select [(ngModel)]="sortOrder" (change)="applyFilters()">
        <option value="recent">Most Recent</option>
        <option value="oldest">Oldest</option>
      </select>
    </label>
    <label>
      Status:
      <select [(ngModel)]="statusFilter" (change)="applyFilters()">
        <option value="all">All</option>
        <option value="answered">Answered</option>
        <option value="unanswered">Unanswered</option>
      </select>
    </label>
  </div>
  <table>
    <thead>
      <tr>
        <th>Product</th>
        <th>Question</th>
        <th>Asked By</th>
        <th>Date</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let q of filteredQuestions">
        <td>
          <a [routerLink]="['/customer/product', q.productId]" class="product-link">
            {{ q.productName }}
          </a>
        </td>
        <td class="question-col" [title]="q.questionText">{{ q.questionText }}</td>
        <td>{{ q.userName }}</td>
        <td>{{ q.createdAt | date:'MMM d' }}</td>
        <td>
          <span [class.answered]="q.answers.length > 0" [class.unanswered]="q.answers.length === 0">
            {{ q.answers.length > 0 ? 'Answered' : 'Unanswered' }}
          </span>
        </td>
        <td>
          <button *ngIf="q.answers.length === 0" (click)="openReply(q)">Reply</button>
          <button *ngIf="q.answers.length > 0" (click)="openEditAnswer(q.answers[0])">Edit Answer</button>
          <button (click)="deleteQuestion(q)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- NEW MODAL BOX -->
<div *ngIf="showModal" class="custom-modal-backdrop">
  <div class="custom-modal-box">
    <h3>{{ isEdit ? 'Edit Answer' : 'Reply to Question' }}</h3>
    <textarea [(ngModel)]="modalAnswerText" rows="4" placeholder="Type your answer..."></textarea>
    <div class="custom-modal-actions">
      <button (click)="closeModal()">Cancel</button>
      <button (click)="submitAnswer()">{{ isEdit ? 'Update' : 'Submit' }}</button>
    </div>
  </div>
</div>